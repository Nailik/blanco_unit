# Services for the Blanco Unit integration

dispense_water:
  name: Dispense water
  description: Dispense water with specified amount and carbonation level.
  fields:
    device_id:
      name: Device
      description: The Blanco Unit device to dispense water from.
      required: true
      example: "a1b2c3d4e5f6"
      selector:
        device:
          integration: blanco_unit
    amount_ml:
      name: Amount (ml)
      description: Amount of water to dispense in milliliters (100-1500, must be multiple of 100).
      required: true
      example: 250
      selector:
        number:
          min: 100
          max: 1500
          step: 100
          unit_of_measurement: "ml"
    co2_intensity:
      name: CO2 intensity
      description: Carbonation level (1=still, 2=medium, 3=high).
      required: true
      example: 1
      selector:
        select:
          options:
            - label: "Still (1)"
              value: "1"
            - label: "Medium (2)"
              value: "2"
            - label: "High (3)"
              value: "3"

change_pin:
  name: Change PIN
  description: Change the device PIN. Optionally update the integration configuration to avoid disconnection.
  fields:
    device_id:
      name: Device
      description: The Blanco Unit device to change the PIN for.
      required: true
      example: "a1b2c3d4e5f6"
      selector:
        device:
          integration: blanco_unit
    new_pin:
      name: New PIN
      description: New 5-digit PIN for the device.
      required: true
      example: "12345"
      selector:
        text:
          type: password
    update_config:
      name: Update configuration
      description: If enabled, updates the integration configuration with the new PIN and reconnects automatically. If disabled, you will need to reconfigure the integration manually with the new PIN.
      required: false
      default: false
      selector:
        boolean:

scan_protocol_parameters:
  name: Scan Protocol Parameters
  description: Test protocol parameters by sending custom BLE commands. Results are returned and logged to debug. Use evt_type (required), ctrl (optional), and pars (optional) to construct the request.
  fields:
    device_id:
      name: Device
      description: The Blanco Unit device to test.
      required: true
      example: "a1b2c3d4e5f6"
      selector:
        device:
          integration: blanco_unit
    data:
      name: Data
      description: JSON object with evt_type (required), ctrl (optional), and pars (optional) fields. Example to get system info - {"evt_type":7, "ctrl":3, "pars":{"evt_type":2}}.
      required: true
      default:
        evt_type: 7
        ctrl: 3
        pars:
          evt_type: 2
      example:
        evt_type: 7
        ctrl: 3
        pars:
          evt_type: 6
      selector:
        object:

scan_wifi_networks:
  name: Scan WiFi Networks
  description: Scan for available WiFi networks near the device. Returns a list of discovered access points with signal strength.
  fields:
    device_id:
      name: Device
      description: The Blanco Unit device to scan with.
      required: true
      example: "a1b2c3d4e5f6"
      selector:
        device:
          integration: blanco_unit

connect_wifi:
  name: Connect to WiFi
  description: Connect the device to a WiFi network.
  fields:
    device_id:
      name: Device
      description: The Blanco Unit device to connect.
      required: true
      example: "a1b2c3d4e5f6"
      selector:
        device:
          integration: blanco_unit
    ssid:
      name: SSID
      description: The WiFi network name to connect to.
      required: true
      example: "MyWiFi"
      selector:
        text:
    password:
      name: Password
      description: The WiFi network password.
      required: true
      example: "mypassword"
      selector:
        text:
          type: password

disconnect_wifi:
  name: Disconnect from WiFi
  description: Disconnect the device from the current WiFi network.
  fields:
    device_id:
      name: Device
      description: The Blanco Unit device to disconnect from WiFi.
      required: true
      example: "a1b2c3d4e5f6"
      selector:
        device:
          integration: blanco_unit

allow_cloud_services:
  name: Allow Cloud Services
  description: Allow cloud services on the device (Freigabe). This permits the manufacturer's cloud services to communicate with the device.
  fields:
    device_id:
      name: Device
      description: The Blanco Unit device to allow cloud services on.
      required: true
      example: "a1b2c3d4e5f6"
      selector:
        device:
          integration: blanco_unit
    rca_id:
      name: RCA ID
      description: Remote cloud access ID. Leave empty to allow all cloud services.
      required: false
      default: ""
      example: ""
      selector:
        text:

factory_reset:
  name: Factory Reset
  description: Perform a full software reset of the device. WARNING - This will reset all device settings to factory defaults.
  fields:
    device_id:
      name: Device
      description: The Blanco Unit device to factory reset.
      required: true
      example: "a1b2c3d4e5f6"
      selector:
        device:
          integration: blanco_unit
